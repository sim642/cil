<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Stats (goblint-cil.GoblintCil.Stats)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">goblint-cil</a> &#x00BB; <a href="../index.html">GoblintCil</a> &#x00BB; Stats</nav><header class="odoc-preamble"><h1>Module <code><span>GoblintCil.Stats</span></code></h1><p>Utilities for maintaining timing statistics</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type" id="type-timerModeEnum" class="anchored"><a href="#type-timerModeEnum" class="anchor"></a><code><span><span class="keyword">type</span> timerModeEnum</span><span> = </span></code><table><tr id="type-timerModeEnum.Disabled" class="anchored"><td class="def variant constructor"><a href="#type-timerModeEnum.Disabled" class="anchor"></a><code><span>| </span><span><span class="constructor">Disabled</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Do not collect timing information</p><span class="comment-delim">*)</span></td></tr><tr id="type-timerModeEnum.SoftwareTimer" class="anchored"><td class="def variant constructor"><a href="#type-timerModeEnum.SoftwareTimer" class="anchor"></a><code><span>| </span><span><span class="constructor">SoftwareTimer</span></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Use OCaml's <code>Unix.time</code> for timing information</p><span class="comment-delim">*)</span></td></tr></table></div></div><div class="odoc-spec"><div class="spec type" id="type-t" class="anchored"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = </span><span>{</span></code><table><tr id="type-t.name" class="anchored"><td class="def record field"><a href="#type-t.name" class="anchor"></a><code><span>name : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Name of the task</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.time" class="anchored"><td class="def record field"><a href="#type-t.time" class="anchor"></a><code><span><span class="keyword">mutable</span> time : float;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>In seconds</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.ncalls" class="anchored"><td class="def record field"><a href="#type-t.ncalls" class="anchor"></a><code><span><span class="keyword">mutable</span> ncalls : int;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Number of repetitions. Only set if <a href="#val-countCalls"><code>Stats.countCalls</code></a> is true.</p><span class="comment-delim">*)</span></td></tr><tr id="type-t.sub" class="anchored"><td class="def record field"><a href="#type-t.sub" class="anchor"></a><code><span><span class="keyword">mutable</span> sub : <span><a href="#type-t">t</a> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Subtasks</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p>A timing entry</p></div></div><div class="odoc-spec"><div class="spec value" id="val-top" class="anchored"><a href="#val-top" class="anchor"></a><code><span><span class="keyword">val</span> top : <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>The top-level timing entry</p></div></div><div class="odoc-spec"><div class="spec value" id="val-reset" class="anchored"><a href="#val-reset" class="anchor"></a><code><span><span class="keyword">val</span> reset : <span><a href="#type-timerModeEnum">timerModeEnum</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Resets all the timings and specifies the method to use for future timings. Call this before doing any timing.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-countCalls" class="anchored"><a href="#val-countCalls" class="anchor"></a><code><span><span class="keyword">val</span> countCalls : <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div><div class="spec-doc"><p>Flag to indicate whether or not to count the number of calls of to <a href="#val-repeattime"><code>Stats.repeattime</code></a> or <a href="#val-time"><code>Stats.time</code></a> for each label. (default: false)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-time" class="anchored"><a href="#val-time" class="anchor"></a><code><span><span class="keyword">val</span> time : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>Time a function and associate the time with the given string. If some timing information is already associated with that string, then accumulate the times. If this function is invoked within another timed function then you can have a hierarchy of timings</p></div></div><div class="odoc-spec"><div class="spec value" id="val-repeattime" class="anchored"><a href="#val-repeattime" class="anchor"></a><code><span><span class="keyword">val</span> repeattime : <span>float <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>repeattime is like time but runs the function several times until the total running time is greater or equal to the first argument. The total time is then divided by the number of times the function was run.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-print" class="anchored"><a href="#val-print" class="anchor"></a><code><span><span class="keyword">val</span> print : <span><span class="xref-unresolved">Stdlib</span>.out_channel <span class="arrow">&#45;&gt;</span></span> <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Print the current stats preceeded by a message</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lookupTime" class="anchored"><a href="#val-lookupTime" class="anchor"></a><code><span><span class="keyword">val</span> lookupTime : <span>string <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Return the cumulative time of all calls to <a href="#val-time"><code>Stats.time</code></a> and <a href="#val-repeattime"><code>Stats.repeattime</code></a> with the given label.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-timethis" class="anchored"><a href="#val-timethis" class="anchor"></a><code><span><span class="keyword">val</span> timethis : <span><span>( <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span> )</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'b</span></span></code></div><div class="spec-doc"><p>Time a function and set lastTime to the time it took</p></div></div><div class="odoc-spec"><div class="spec value" id="val-lastTime" class="anchored"><a href="#val-lastTime" class="anchor"></a><code><span><span class="keyword">val</span> lastTime : <span>float <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div></div></body></html>